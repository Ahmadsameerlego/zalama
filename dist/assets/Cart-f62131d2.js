import{E}from"./EditAddOnsModal-6de7927e.js";import{T as B}from"./Toast-7c860256.js";import{k as J,r as m,p as M,o as V,l as A,b as i,c as u,e,d as g,t as a,F as f,i as D,w as k,m as F,f as C,n as _,h as y}from"./index-4c615b4d.js";/* empty css                                                                        */const H={dir:"rtl",class:"bg-gray-50 text-right min-h-screen"},L={class:"container mx-auto px-4 py-8"},P={class:"text-3xl font-bold mb-8"},z={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},U={class:"flex items-center gap-4 w-full md:w-auto"},q=["src","alt"],G={class:"font-semibold md:text-lg"},K={key:0,class:"text-sm text-gray-500"},Q={class:"text-primary md:font-bold"},R={class:"flex flex-wrap md:flex-nowrap items-center gap-3 md:gap-4 justify-center"},W={class:"flex items-center gap-2"},X=["onClick"],Y={class:"mx-2 font-semibold"},Z=["onClick"],tt={class:"flex items-center gap-2 w-full md:w-auto"},et=["onClick"],st=["onClick"],ot={class:"bg-white rounded-xl shadow-lg p-6"},rt={class:"flex justify-between items-center mb-4"},at={class:"text-xl font-bold"},nt={class:"text-2xl font-bold text-primary"},it={class:"w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary-dark transition text-lg"},lt={key:1,class:"bg-white rounded-xl shadow-lg p-12 text-center"},ct={class:"text-2xl font-bold mb-2"},dt={class:"text-gray-500 mb-6"},ht={__name:"Cart",setup(ut){J("cart");const l=m({visible:!1,message:"",type:"success"}),c=(t,s="success")=>{l.value={visible:!0,message:t,type:s},setTimeout(()=>l.value.visible=!1,3e3)},h=m(!1),b=m(null),$=t=>{b.value=t,h.value=!0},S=t=>{v()},n=m([]),x=m([]),j=M(()=>n.value.reduce((t,s)=>t+s.total_with_option,0)),v=async()=>{var s;const t=JSON.parse(localStorage.getItem("user")||"{}");try{const o=await _.post("/api/show-cart",{user_id:t.id});n.value=o.data.data,x.value=(s=o.data)==null?void 0:s.providers}catch(o){console.error("Error fetching data:",o)}},I=async t=>{const s=JSON.parse(localStorage.getItem("user")||"{}");try{const o=await _.post("/api/update-to-cart",{user_id:s.id,cart_id:t,count:0,option_ids:[]});c(o.data.msg,"success"),setTimeout(()=>{v()},800)}catch(o){console.error("Error fetching data:",o),c("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…","error")}},w=async(t,s)=>{var r;const o=JSON.parse(localStorage.getItem("user")||"{}");if(!(o!=null&&o.id)){c("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹","error");return}try{s<=0?(await _.post("/api/update-to-cart",{user_id:o.id,cart_id:t.id,count:0,option_ids:[]}),c("ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„Ø³Ù„Ø©","success")):(await _.post("/api/update-to-cart",{user_id:o.id,cart_id:t.id,count:s,option_ids:JSON.stringify((r=t.service_options)==null?void 0:r.map(d=>d.id))||[]}),c("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±","success")),setTimeout(()=>{v()},500)}catch(d){console.error("Error updating item count:",d),c("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…","error")}},N=t=>{const s=n.value.find(o=>o.id===t);s&&w(s,s.count+1)},O=t=>{const s=n.value.find(o=>o.id===t);s&&w(s,s.count-1)},T=()=>{localStorage.setItem("cart_data",JSON.stringify(n.value)),localStorage.setItem("providers",JSON.stringify(x.value))};return V(()=>{v()}),(t,s)=>{const o=A("router-link");return i(),u(f,null,[e("div",H,[g(E,{open:h.value,item:b.value,onClose:s[0]||(s[0]=r=>h.value=!1),onUpdate:S},null,8,["open","item"]),e("div",L,[e("h1",P,a(t.$t("cartItems")),1),n.value.length?(i(),u(f,{key:0},[e("div",z,[(i(!0),u(f,null,D(n.value,r=>{var d;return i(),u("div",{key:r._key,class:"flex flex-col md:flex-row md:items-center md:justify-between justify-center items-center py-4 border-b last:border-b-0 gap-4"},[e("div",U,[e("img",{src:r.service_image,alt:r.service_title,class:"w-16 h-16 object-contain rounded"},null,8,q),e("div",null,[e("h3",G,a(r.service_title),1),(d=r.service_options)!=null&&d.length?(i(),u("div",K,a(t.$t("addsOns"))+": "+a(r.service_options.map(p=>p.title).join("ØŒ ")),1)):C("",!0),e("div",Q,a(r.total_with_option.toFixed(2))+" "+a(t.$t("currency")),1)])]),e("div",R,[e("div",W,[e("button",{onClick:p=>O(r.id),class:"bg-gray-200 rounded px-3 py-1"}," - ",8,X),e("span",Y,a(r.count),1),e("button",{onClick:p=>N(r.id),class:"bg-gray-200 rounded px-3 py-1"}," + ",8,Z)]),e("div",tt,[e("button",{onClick:p=>$(r),class:"text-primary hover:text-white text-sm flex items-center gap-1 px-3 py-1 rounded border border-primary hover:bg-primary transition-colors w-full md:w-auto justify-center"},[s[1]||(s[1]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),y(" "+a(t.$t("edit")),1)],8,et),e("button",{onClick:p=>I(r.id),class:"text-red-500 hover:text-red-700 w-full md:w-auto flex justify-center"},s[2]||(s[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,st)])])])}),128))]),e("div",ot,[e("div",rt,[e("span",at,a(t.$t("total"))+":",1),e("span",nt,a(j.value.toFixed(2))+" "+a(t.$t("currency")),1)]),e("button",it,[g(o,{onClick:T,to:"/checkout",class:"block w-full h-full flex items-center justify-center"},{default:k(()=>[y(a(t.$t("ProceedToCheckout")),1)]),_:1})])])],64)):(i(),u("div",lt,[s[3]||(s[3]=e("div",{class:"text-6xl mb-4"},"ðŸ›’",-1)),e("h2",ct,a(t.$t("emptyCart")),1),e("p",dt,a(t.$t("emptyCartDescription")),1),g(o,{to:"/",class:"bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition"},{default:k(()=>[y(a(t.$t("startShopping")),1)]),_:1})]))])]),l.value.visible?(i(),F(B,{key:0,message:l.value.message,type:l.value.type,visible:l.value.visible},null,8,["message","type","visible"])):C("",!0)],64)}}};export{ht as default};
